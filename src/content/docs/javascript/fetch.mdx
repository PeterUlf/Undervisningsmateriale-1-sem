---
title: "Fetch API: Single Product"
description: Hent ét produkt fra en API og vis det i HTML
sidebar:
  label: Fetch Single Product
  order: 4
  badge:
    text: Tema 8
    variant: tip
    class: badge-theme-8
---

import Slide from "../../../components/Slide.astro";

<Slide>

## Hvad lærer du her?

På denne side arbejder du med **ét produkt ad gangen**.

1. Hvordan du henter data med `fetch()`
2. Hvordan JSON bliver til et objekt
3. Hvordan `show(data)` viser produktet i HTML

</Slide>
<div class="page-break"></div>
<Slide>

## API-reference: Single Product

Endpoint til ét produkt:

`https://kea-alt-del.dk/t7/api/products/1528`

Hvis du skifter tallet til et andet id, får du et andet produkt.

</Slide>
<div class="page-break"></div>
<Slide>

## Koden samlet

```javascript
const id = 1528;
const productURL = "https://kea-alt-del.dk/t7/api/products/" + id;
const productcontainer = document.querySelector("#productContainer");

function getData() {
  fetch(productURL).then((res) => res.json().then((data) => show(data)));
}

function show(data) {
  productcontainer.innerHTML = `
    <img src="https://kea-alt-del.dk/t7/images/webp/640/${id}.webp" alt="Produktbillede">
    <h2>${data.productdisplayname}</h2>
    <p>Pris: ${data.price}</p>
  `;
}

getData();
```

</Slide>
<div class="page-break"></div>
<Slide>

## Øvelse 1: Forstå kæden

Forklar med egne ord denne linje:

```javascript
fetch(productURL).then((res) => res.json().then((data) => show(data)));
```

:::tip[Hint]

- Hvad er 'produktURL' (se forrige side/ovenfor)?
- Hvad er 'res'?
- Hvad gør 'res.json()'?
- hvad er 'data'?
- Hvad er `show(data)` ?
  :::

</Slide>
<div class="page-break"></div>
<Slide>

## Forklaring af denne linje

```javascript
fetch(productURL).then((res) => res.json().then((data) => show(data)));
```

Læs den sådan her:

1. `fetch(productURL)` henter data fra API'en.
2. Når svaret kommer, kaldes `.then((res) => ...)`.
3. `res.json()` laver svaret om fra JSON-tekst til JavaScript-data.
4. Når data er klar, kaldes `.then((data) => show(data))`.
5. `show(data)` modtager objektet og kan vise det i HTML.

</Slide>
<div class="page-break"></div>
<Slide>

## Hvad sker der i `getData()`?

```javascript
const id = 1528;
const productURL = "https://kea-alt-del.dk/t7/api/products/" + id;

function getData() {
  // 1) Hent fra API
  // 2) Konverter JSON-svar til JavaScript-objekt
  // 3) Send objektet videre til show(data)
  fetch(productURL).then((res) => res.json().then((data) => show(data)));
}

function show(data) {
  console.log("De data jeg henter er: ", data);
}

getData(); //VIGTIG!! Uden denne linje sker der ingenting
```

- `res` er response fra serveren
- `res.json()` laver JSON til JavaScript-data
- `data` er objektet du bruger som parameter i functionen show() når du kalder:`show(data)`

</Slide>
<div class="page-break"></div>
<Slide>

## Hvad sker der i `show(data)`?

```javascript
function show(data) {
  productcontainer.innerHTML = `
    <h2>${data.productdisplayname}</h2>
    <p>${data.price}</p>
  `;
}
```

- Backticks `` `...` `` bruges til template strings
- `${...}` indsætter JavaScript-værdier i HTML
- `data` er et objekt, derfor kan du skrive `data.productdisplayname`

</Slide>
<div class="page-break"></div>
<Slide>

## Øvelse 2: Brug objekt-data

Givet:

```javascript
const data = {
  productdisplayname: "Beanie",
  price: 149,
};
```

Brug fx denne HTML i din side:

```html
<article id="productCard"></article>
```

1. Log navn
2. Log pris
3. Lav en `<h2>` med navnet via template string

:::tip[Hint]
`console.log(data.productdisplayname);`

```javascript
const card = document.querySelector.............
card.innerHTML = `<h2>${da...........

```

:::

</Slide>
<div class="page-break"></div>
<Slide>

## Øvelse 3: Større objekt i en `<article>`

Givet dette objekt:

```javascript
const productData = {
  id: 1163,
  gender: "Men",
  category: "Apparel",
  subcategory: "Topwear",
  articletype: "Tshirts",
  basecolour: "Blue",
  season: "Summer",
  productionyear: 2011,
  usagetype: "Sports",
  productdisplayname: "Sahara Team India Fanwear Round Neck Jersey",
  parsed: 1,
  soldout: 0,
  relid: 1163,
  price: 895,
  discount: null,
  variantname: "Roundneck Jersey",
  brandname: "Nike",
  brandbio: "Nike, creating experiences for today's athlete",
  brandimage:
    "http://assets.myntassets.com/v1/assets/banners/2015/6/26/1435317851398-23197-3chxv6.jpg",
  agegroup: "Adults-Men",
  colour1: "NA",
  colour2: "NA",
  fashiontype: "Fashion",
  materialcaredesc: "\\u003Cp\\u003E100% polyester\\u003Cbr\\u003EMachine wash\\u003C/p\\u003E",
  sizefitdesc: null,
  description:
    "\\u003Cp\\u003EBlue round neck Sahara Team India jersey, has short sleeves, print on the chest and back chest\\u003Cbr\\u003E\\u003Cbr\\u003EWarranty for manufacturing defects: 6 months (not valid on products with more than 20% discount)\\u003Cbr\\u003E\\u003C/p\\u003E",
  styledesc:
    "\\u003Cp\\u003ECheer for the Indian cricket team on and off the fields in this blue polo neck jersey from Nike. ",
};
```

Brug fx denne HTML:

```html
<article id="productCardLarge"></article>
```

Opgave:

1. Find article-elementet med `querySelector`
2. Indsæt mindst disse felter i `innerHTML`:
`productdisplayname`, `price`, `brandname`, `category`, `season`, `usagetype`
3. Brug template string med backticks og `${...}`

:::tip[Hint]
```javascript
const card = document.querySelector("#productCardLarge");
```
:::

</Slide>
<div class="page-break"></div>
<Slide>

## Næste side

[Fetch Product List →](/javascript/fetch-productlist/)

[FashionRUs API](https://kea-alt-del.dk/t7/api/)

</Slide>
